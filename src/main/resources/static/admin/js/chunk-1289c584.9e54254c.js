(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1289c584"],{"2d0a":function(e,t,l){"use strict";var o=l("4d41"),a=l.n(o);a.a},"4d41":function(e,t,l){},"685b":function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-card",{staticStyle:{"margin-top":"10px","font-size":"14px","line-height":"30px","margin-bottom":"15px"}},[l("el-row",{staticStyle:{"font-weight":"800"}},[e._v("\n            操作提示：\n        ")]),e._v(" "),l("el-row",[e._v("\n            1、系统管理员角色设置。\n        ")]),e._v(" "),l("el-row",[e._v("\n            2、可添加各种角色、给指定角色赋予某些功能权限。\n        ")])],1),e._v(" "),l("el-row",[l("el-button",{attrs:{type:"primary"},on:{click:e.handleCreateRole}},[e._v("创建")])],1),e._v(" "),l("el-card",{staticStyle:{"margin-top":"10px"}},[l("el-table",{ref:"multipleTable",staticStyle:{width:"100%","min-height":"300px","margin-bottom":"20px"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[l("el-table-column",{attrs:{label:"角色名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.roleName))]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"roleRemark",label:"备注"}}),e._v(" "),l("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini"},on:{click:function(l){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),l("el-button",{attrs:{size:"mini"},on:{click:function(l){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{ref:"form",attrs:{"label-position":"top",model:e.form,"label-width":"80px","status-icon":""}},[l("el-form-item",{attrs:{label:"角色名"}},[l("el-input",{model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"角色备注"}},[l("el-input",{model:{value:e.form.roleRemark,callback:function(t){e.$set(e.form,"roleRemark",t)},expression:"form.roleRemark"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"角色权限"}},[[l("el-transfer",{attrs:{data:e.aclActionData,titles:["全部权限组","拥有权限组"]},model:{value:e.aclActionValue,callback:function(t){e.aclActionValue=t},expression:"aclActionValue"}})]],2)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handPostData()}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"",visible:e.dialogVisibleCreateRole,width:"50%"},on:{"update:visible":function(t){e.dialogVisibleCreateRole=t}}},[l("el-form",{ref:"form",attrs:{"label-position":"top",model:e.form,"label-width":"80px","status-icon":""}},[l("el-form-item",{attrs:{label:"角色名"}},[l("el-input",{model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"角色备注"}},[l("el-input",{model:{value:e.form.roleRemark,callback:function(t){e.$set(e.form,"roleRemark",t)},expression:"form.roleRemark"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"角色权限"}},[[l("el-transfer",{attrs:{data:e.aclActionData,titles:["全部权限组","拥有权限组"]},model:{value:e.aclActionValue,callback:function(t){e.aclActionValue=t},expression:"aclActionValue"}})]],2)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisibleCreateRole=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handPostDataCreateRole()}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"提示",visible:e.dialogVisibleConfirmDelete,width:"30%"},on:{"update:visible":function(t){e.dialogVisibleConfirmDelete=t}}},[l("span",[e._v("确定删除该角色："+e._s(e.prepareDeleteRoleName))]),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisibleConfirmDelete=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handPostDataDeleteRole()}}},[e._v("确 定")])],1)])],1)},a=[],i=l("5c96"),r={data:function(){return{dialogVisibleConfirmDelete:!1,dialogVisibleCreateRole:!1,dialogVisible:!1,isCreate:!1,form:{roleId:1,roleName:"",roleRemark:""},aclActionData:[],aclActionValue:[],prepareDeleteRoleId:null,prepareDeleteRoleName:null}},computed:{tableData:function(){return this.$store.state.acl.roleList}},created:function(){this.load()},methods:{load:function(){this.$store.dispatch("acl/getRoleList"),this.$store.dispatch("acl/getGroupList")},handleCreateRole:function(){var e=this;this.dialogVisibleCreateRole=!0,this.form.roleId=null,this.form.roleName="",this.form.roleRemark="";for(var t=this.$store.state.acl.groupList,l=[],o=[],a=0;a<t.length;a++){var i=t[a],r=i.id;l.push({key:r,label:i.groupName,disabled:!1})}e.aclActionData=l,e.aclActionValue=o},handleDelete:function(e,t){this.prepareDeleteRoleId=t.id,this.prepareDeleteRoleName=t.roleName,this.dialogVisibleConfirmDelete=!0},handleEdit:function(e,t){var l=this,o=this;this.form.roleName=t.roleName,this.form.roleRemark=t.roleRemark,this.form.roleId=t.id,this.$store.dispatch("acl/roleDetail",{role_id:this.form.roleId}).then((function(e){for(var t=l.$store.state.acl.roleDetail,a=[],i=[],r=t.listRoleGroupDetail,s=0;s<r.length;s++){var n=r[s],c=n.groupId;a.push({key:c,label:n.groupName,disabled:!1}),n.selected&&i.push(c)}o.aclActionData=a,o.aclActionValue=i,o.dialogVisible=!0}))},handPostData:function(){var e=this;this.$store.dispatch("acl/roleDetailUpdate",{role_id:this.form.roleId,role_name:this.form.roleName,role_remark:this.form.roleRemark,role_group_list:JSON.stringify(this.aclActionValue)}).then((function(t){e.dialogVisible=!1,Object(i["Message"])({message:"修改完成",type:"success",duration:5e3}),e.load()}))},handPostDataCreateRole:function(){var e=this;this.$store.dispatch("acl/roleAdd",{role_name:this.form.roleName,role_remark:this.form.roleRemark,role_group_list:JSON.stringify(this.aclActionValue)}).then((function(t){e.dialogVisible=!1,Object(i["Message"])({message:"添加完成",type:"success",duration:5e3}),e.dialogVisibleCreateRole=!1,e.load()}))},handPostDataDeleteRole:function(){var e=this;this.$store.dispatch("acl/roleDelete",{role_id:this.prepareDeleteRoleId}).then((function(t){e.dialogVisible=!1,Object(i["Message"])({message:"完成",type:"success",duration:5e3}),e.dialogVisibleConfirmDelete=!1,e.load()}))}}},s=r,n=(l("2d0a"),l("2877")),c=Object(n["a"])(s,o,a,!1,null,"10b92a8d",null);t["default"]=c.exports}}]);